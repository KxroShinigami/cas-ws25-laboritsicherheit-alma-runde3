# Rate limiting zones (must be defined in http context)
# These zones are used by server blocks for DoS protection

# Limit requests per IP: 10 requests per second with burst of 20
limit_req_zone $binary_remote_addr zone=general_limit:10m rate=10r/s;

# Limit connections per IP: max 20 concurrent connections
limit_conn_zone $binary_remote_addr zone=conn_limit:10m;

# Stricter rate limiting for PHP endpoints (more resource-intensive)
limit_req_zone $binary_remote_addr zone=php_limit:10m rate=5r/s;

